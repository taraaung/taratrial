var loadingImg,infoMessage;function init(){loadingImg=document.getElementById("loading_img"),infoMessage=document.getElementById("message");var e=getUrlParam("shop_name"),t=getUrlParam("system_type"),r=getUrlParam("host_name");e?t?r?httpGetAsync("https://tarabartest.firebaseio.com/Shops/"+e+"/cloud_domain.json",(function(n){var o=n[t.toUpperCase()]+"/tarabar";httpGetAsync("https://tarabartest.firebaseio.com/Shops/"+e+"/cookies/"+e+"-"+r+".json",(function(n){var s="?host_name="+r+"&sn="+e;s+="&icft="+(n?n.isClientFirstTime:"true"),httpGetAsync(o+"/client_info",(function(e){window.location.replace(o+s)}),(function(n){showErrorMessage("Sorry, server cannot be reached!",e,r,t)}))}),(function(n){showErrorMessage("Sorry, client information cannot be fetched!",e,r,t)}))}),(function(n){showErrorMessage("Sorry, server domain cannot be fetched!",e,r,t)})):showErrorMessage('"HostName" cannnot be empty.</br>"HostName" ထည့်‌ပေးပါ။',e,r,t):showErrorMessage('"SystemType" cannnot be empty.</br>"SystemType" ထည့်‌ပေးပါ။',e,r,t):showErrorMessage('"ShopName" cannnot be empty.</br>"ShopName" ထည့်‌ပေးပါ။',e,r,t)}function showErrorMessage(e,t,r,n){loadingImg.style.display="none";var o=document.getElementById("back_btn");o&&(o.style.display="block"),infoMessage.style.color="red",infoMessage.style["font-size"]="large",infoMessage.style["font-family"]="cursive",infoMessage.style["line-height"]="35px",infoMessage.innerHTML=(e?e+"</br></br>":"")+"ShopName = "+(t||'" "')+"</br>HostName = "+(r||'" "')+"</br>SystemType = "+(n||'" "')+'</br>Please confirm above information is correct!</br></br>1. Please check internet connection is ok at both Server and client machine.</br>2. Check that Cloud Access status is online at Server Logs.</br>3. At server machine, Click on "Restart Cloud Access" (Home Screen -> About -> Server Logs).</br>4. Make sure Server and Client date and time are correct and the same.</br></br>1. Cloud Services မရတော့တဲ့အခါ Server နဲ့ Client စက်တွေမှာ Internet ရှိမရှိစစ်ပေးပါ။</br>2. Server စက်ရဲ့ Server Log မှာ online ဖြစ်ပီးစိမ်းနေလား စစ်ပေးပါ။</br>3. Server စက်ရဲ့ about icon ထဲက server log တွင် "Restart Cloud Access" ကို နှိပ်၍ Cloud Service ကို restart ချပေးပါ။</br>4. Server နှင့် Client စက်များ၏ အချိန် တူညီ‌ကြောင်း ကိုစစ်ပေးပါ။</br>'}function httpGetAsync(e,t,r){fetch(e).then((function(e){return e.json()})).then((function(e){t(e)})).catch((function(e){r(e)}))}getUrlParam=function(e){var t=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==t?null:t[1]||0};